/*

	77 78 79 | 87 88 89 | 97 98 99
	74    76 | 84    86 | 94    96
	71 72 73 | 81 82 83 | 91 92 93
	---------+----------+---------
	47 48 49 | 57 58 59 | 67 68 69
	44    46 | 54    56 | 64    66
	41 42 43 | 51 52 53 | 61 62 63
	---------+----------+---------
	17 18 19 | 27 28 39 | 37 38 39
	14    16 | 24    36 | 34    36
	11 12 13 | 21 22 33 | 31 32 33
*/

const s = [];
let t = undefined;

function init()
{
	for (let i = 1; i <= 9; i++)
	{
		for (let j = 1; j <= 9; j++)
		{
			let index = 10 * i + j;
			let id = ("i" + i) + j;
			
			s[index] = document.getElementById(id);
		}
	}
	
	t = document.getElementById("the_textarea");
	
	updateTextArea();
}

function representation(squareContents) {
	if (squareContents == "") {
		return "_";
	} else {
		return squareContents;
	}
}

function f(index) { return representation(s[index].value); }

/*
Model is what we used in Prolog
[[
[[_,_,_],[_,_,_],[9,_,6]],
[[_,_,_],[_,6,2],[8,1,_]],
[[_,_,_],[1,_,_],[_,_,_]]
],[
[[9,_,2],[_,_,_],[3,_,_]],
[[6,_,_],[_,_,3],[1,_,7]],
[[7,_,_],[8,_,_],[_,6,4]]
],[
[[1,_,4],[2,_,_],[_,_,_]],
[[_,_,3],[_,_,_],[_,_,_]],
[[_,8,_],[9,_,_],[6,_,5]]
]]
*/

function updateTextArea() {
	t.value = "X = \n"
		+ "[[\n"
		+ "[[" + f(77) + "," + f(78) + "," + f(79) + "],[" + f(87) + "," + f(88) + "," + f(89) + "],[" + f(97) + "," + f(98) + "," + f(99) + "]],\n"
		+ "[[" + f(74) + "," + f(75) + "," + f(76) + "],[" + f(84) + "," + f(85) + "," + f(86) + "],[" + f(94) + "," + f(95) + "," + f(96) + "]],\n"
		+ "[[" + f(71) + "," + f(72) + "," + f(73) + "],[" + f(81) + "," + f(82) + "," + f(83) + "],[" + f(91) + "," + f(92) + "," + f(93) + "]]\n"
		+ "],[\n"
		+ "[[" + f(47) + "," + f(48) + "," + f(49) + "],[" + f(57) + "," + f(58) + "," + f(59) + "],[" + f(67) + "," + f(68) + "," + f(69) + "]],\n"
		+ "[[" + f(44) + "," + f(45) + "," + f(46) + "],[" + f(54) + "," + f(55) + "," + f(56) + "],[" + f(64) + "," + f(65) + "," + f(66) + "]],\n"
		+ "[[" + f(41) + "," + f(42) + "," + f(43) + "],[" + f(51) + "," + f(52) + "," + f(53) + "],[" + f(61) + "," + f(62) + "," + f(63) + "]]\n"
		+ "],[\n"
		+ "[[" + f(17) + "," + f(18) + "," + f(19) + "],[" + f(27) + "," + f(28) + "," + f(29) + "],[" + f(37) + "," + f(38) + "," + f(39) + "]],\n"
		+ "[[" + f(14) + "," + f(15) + "," + f(16) + "],[" + f(24) + "," + f(25) + "," + f(26) + "],[" + f(34) + "," + f(35) + "," + f(36) + "]],\n"
		+ "[[" + f(11) + "," + f(12) + "," + f(13) + "],[" + f(21) + "," + f(22) + "," + f(23) + "],[" + f(31) + "," + f(32) + "," + f(33) + "]]\n"
		+ "]],\n"
		+ "solve_sudoku(X),\n"
		+ "display_sudoku(X).\n";
}